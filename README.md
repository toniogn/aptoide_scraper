# Aptoide Scraper

## Introduction

Aptoide Scraper is a web service dedicated to scrap some information about aptoide applications by just copy-pasting it's url `https://app_to_scrap.en.aptoide.com/app` into the url field and click on the scrap button to let the magic happens.

> The application has been developped with django as web-service framework, requests for http requesting and beautiful soup for http response scraping with html5lib for html parsing.

---

## Code Base

The code is organized as following (the uncommented files are the ones automatically generated by django and not modified later):
```
-> aptoide_scraper #root folder
-----> aptoide_scraper #django project folder
---------> asgi.py
---------> settings.py #settings of the django project
---------> urls.py #url configuration of the django project
---------> wsgi.py
-----> core: #django application folder
---------> migrations #application's models migrations folder
---------> templates #application's views html templates
-------------> detail.html #html template of the detail view of a scraped aptoide url
-------------> index.html #html template of the index view of the application
---------> tests: #application's tests
-------------> test_unit.py #unit tests of the application
-------------> test_functional.py #functional tests of the application
---------> admin.py
---------> apps.py
---------> forms.py #application's custom forms to use in FormView views
---------> models.py #application's orm to map data to django's database
---------> urls.py #url configuration of the application
---------> views.py #views of the application
```

> Eached scraped application is interpreted as a django model instance and thus stored into database. We could imagine further treatments based on this storage like using stored data for multiple requests to the same aptoide's application within a given time lapse.

---

## Behavior

The core application's behavior is controlled by its two views, the index view accessed at home page which displays a form with an aptoide application url field to fill. A submit button tries a form validation, once validated the aptoide application url is scraped, the corresponding model is created or updated in the database and th user is redirected to the detail view of the scraped application.

---

## Installation

Before running the application first install dependencies in a python virtual environment with:
```powershell
python -m venv your_venv_name
your_venv_name/Scripts/activate
pip install -r requirements.txt
cd aptoide_scraper
```

---

## Type checking

To check types on th application you shoul run:
```powershell
mypy core/
mypy aptoide_scraper/
```
All the lasting errors must be inherited from the web framework django and generated migrations.

---

## Usage

Then you can either run the django server with:
```powershell
python manage.py runserver
```
> Visit the url http://127.0.0.1:8000/ to use the scraping web service.

Or you can measure the unit test coverage in the core application, the coverage configurations are detailed in the aptoide_scraper/.coveragerc file:
```powershell
coverage run manage.py test core.tests.test_unit
coverage report
```

Or run functional test to ensure multilangage functionning on a given aptoide application's url panel:
```powershell
python manage.py test core.tests.test_functional
```